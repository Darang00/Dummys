<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.dummys.dao.TypeDao">
	<!-- 
	//type생성
	public int insertType(Type type);
	
	//id로 타입 찾기
	public List<Type> getTypeUserId(String userid);
	
	//타입 전체
	public List<Type> getTypeAll();
	
	//카테고리 별 조회
	public List<Type> getTypeCategory(int category);
	
	//type상세
	public Type typeDetail(int type_no);
	
	//type수정
	public int updateType(Type type);
	
	//type삭제
	public int deleteType(int type_no);
	
	//더미데이터 받아오기
	public int insertDummy(Dummy_data dummy_data);
	 -->

	 <insert id="insertType" parameterType="kr.or.dummys.dto.Type">
	 	insert into type(type_no, userid, process_no, type_name, type_reason, type_category, type_open)
	 	values(type_no_seq.nextval, #{userid}, ${process_no}, #{type_name}, #{type_reason}, ${type_category}, ${type_open})
	 	<selectKey keyProperty="type_no" resultType="Integer" order="AFTER">
	 		select type_no_seq.currval from dual
	 	</selectKey>
	 </insert>
	 
	 <insert id="insertDummy">
	 	insert into dummy_data(dummy_data_no, type_no, dummy_data_word)
	 	values(dummy_data_no_seq.nextval, #{param1}, #{param2})
	 </insert>
	 
	 <select id="getTypeUserId" resultType="kr.or.dummys.dto.Type">
	 	select * from type where userid = #{userid} and type_delete = 0 order by type_no desc
	 </select>
	 
	 <select id="getTypeAll" resultType="kr.or.dummys.dto.Type">
	 	select * from type where type_delete = 0 order by type_no desc
	 </select>
	 
	 <select id="getTypeCategory" resultType="kr.or.dummys.dto.Type">
	 	select * from type where type_category = ${type_category} and type_delete = 0 order by type_no desc
	 </select>
	 
	 <select id="typeDetail" resultType="kr.or.dummys.dto.Type">
	 	
	 </select>
	 
	 <!-- 타입 삭제 -->
	 <update id="deleteType">
	 	update type set type_delete = 1 where type_no = ${type_no}
	 </update>
	 
</mapper>